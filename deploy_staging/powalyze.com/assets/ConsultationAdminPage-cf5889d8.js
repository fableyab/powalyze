import{c as u,a8 as f,bS as y,r as m,k as e,E as h,bM as b,N as v,L as A,B as r,y as C}from"./index-7b89e187.js";import{B as k}from"./badge-048b69d3.js";import{C as w}from"./circle-check-big-e5fad828.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),K=()=>{const{user:a,loading:j}=f(),{consultations:o,loadConsultations:d,loading:p,deleteConsultation:g,updateConsultationStatus:N}=y(),[i,l]=m.useState("all");if(m.useEffect(()=>{(a==null?void 0:a.role)==="admin"&&d()},[a,d]),j)return e.jsx("div",{className:"min-h-screen bg-[#0A0A0A] flex items-center justify-center",children:e.jsx(h,{className:"animate-spin text-[#BFA76A]"})});if(!a||a.role!=="admin")return e.jsx(b,{to:"/dashboard"});const x=i==="all"?o:o.filter(s=>{var t;return((t=s.status)==null?void 0:t.toLowerCase())===i}),n=[{header:"Date",accessorKey:"createdAt",render:s=>new Date(s.createdAt).toLocaleDateString()},{header:"Nom",accessorKey:"lastName",render:s=>e.jsxs("span",{className:"font-bold",children:[s.firstName," ",s.lastName]})},{header:"Entreprise",accessorKey:"company"},{header:"Email",accessorKey:"email"},{header:"Status",accessorKey:"status",render:s=>{const t=s.status||"New",c=t==="New"?"bg-blue-500/20 text-blue-500":t==="Completed"?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500";return e.jsx(k,{className:`${c} border-none`,children:t})}},{header:"Actions",accessorKey:"id",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>N(s.id,"Completed"),title:"Marquer comme traité",children:e.jsx(w,{size:16,className:"text-green-500"})}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>g(s.id),title:"Supprimer",children:e.jsx(S,{size:16,className:"text-red-500"})})]})}];return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] text-white flex flex-col",children:[e.jsx(v,{}),e.jsxs("main",{className:"flex-grow pt-32 pb-20 container mx-auto px-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Consultations"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(A,{to:"/admin/statistics",children:e.jsxs(r,{variant:"outline",className:"border-[#BFA76A] text-[#BFA76A] hover:bg-[#BFA76A] hover:text-black",children:[e.jsx(B,{size:16,className:"mr-2"})," Statistiques"]})}),e.jsxs("div",{className:"flex gap-2 bg-[#111] p-1 rounded-lg border border-white/10",children:[e.jsx(r,{size:"sm",variant:i==="all"?"default":"ghost",onClick:()=>l("all"),children:"Tous"}),e.jsx(r,{size:"sm",variant:i==="new"?"default":"ghost",onClick:()=>l("new"),children:"Nouveaux"}),e.jsx(r,{size:"sm",variant:i==="completed"?"default":"ghost",onClick:()=>l("completed"),children:"Traités"})]})]})]}),e.jsx("div",{className:"bg-[#111] border border-white/10 rounded-xl overflow-hidden shadow-xl",children:p?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(h,{className:"animate-spin text-[#BFA76A]"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-black/50 border-b border-white/10 text-gray-400 uppercase",children:e.jsx("tr",{children:n.map((s,t)=>e.jsx("th",{className:"p-4 font-medium",children:s.header},t))})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:n.length,className:"p-8 text-center text-gray-500",children:"Aucune consultation trouvée."})}):x.map(s=>e.jsx("tr",{className:"hover:bg-white/5 transition-colors",children:n.map((t,c)=>e.jsx("td",{className:"p-4",children:t.render?t.render(s):s[t.accessorKey]},c))},s.id))})]})})})]}),e.jsx(C,{})]})};export{K as default};
