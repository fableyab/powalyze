import{aP as D,D as v,k as c,B as F,E as S,a0 as y,bN as z}from"./index-7b89e187.js";import C from"./html2canvas.esm-e0a7d97b.js";const N=({targetId:l,filename:m="document.pdf",variant:h="outline",className:w="",label:x="Exporter PDF"})=>{const[d,g]=D.useState(!1),{toast:a}=v(),E=async()=>{const o=document.getElementById(l);if(!o){console.error(`Element with id ${l} not found`),a({variant:"destructive",title:"Erreur",description:"Élément introuvable pour l'export."});return}g(!0),a({title:"Génération en cours...",description:"Votre PDF est en train d'être préparé."});try{await new Promise(f=>setTimeout(f,500));const e=await C(o,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#0A0A0A",windowWidth:o.scrollWidth,windowHeight:o.scrollHeight}),u=e.toDataURL("image/png"),t=new z("p","mm","a4"),n=210,p=295,r=e.height*n/e.width;let s=r,i=0;for(t.addImage(u,"PNG",0,i,n,r),s-=p;s>=0;)i=s-r,t.addPage(),t.addImage(u,"PNG",0,i,n,r),s-=p;const P=new Date().toLocaleString();t.setFontSize(8),t.setTextColor(100),t.text(`Généré par Powalyze.ch le ${P}`,10,t.internal.pageSize.getHeight()-10),t.save(m),a({title:"Succès",description:"PDF téléchargé avec succès.",variant:"success"})}catch(e){console.error("PDF Export Error:",e),a({variant:"destructive",title:"Erreur",description:"Erreur lors de la génération du PDF."})}finally{g(!1)}};return c.jsxs(F,{onClick:E,variant:h,disabled:d,className:`gap-2 transition-all ${w}`,children:[d?c.jsx(S,{size:16,className:"animate-spin"}):c.jsx(y,{size:16}),x]})};export{N as P};
